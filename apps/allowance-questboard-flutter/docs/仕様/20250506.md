# 各所要件

## IDの仕様について
ユーザはメールアドレスとパスワードを使用し、ログインしたあと、IDを取得する。

その後の処理は全てこのIDを使用して行う。

## テーブル設計仕様
### child_questテーブル

- 親が子供のクエストを発行すると、対象の[family_quest]テーブルから[child_quest]テーブルインスタンスが生成される。
- 子供が２回目受注するときは

## クエスト編集画面（QA）
### クエスト編集画面のTabBarViewから親画面に編集内容を伝える？

→delegate方式。

TabBarView画面生成時に

親画面にdelegateを適用させます。

## クエスト管理画面の受注要件について
指定方法（学年・年齢）とは、受注可能年齢を年齢か学年で表示させるオプションのこと

これについては`一旦廃止`。

とりあえずは、年齢表示のみ

## 親ユーザがペナルティ時の挙動
### 背景

親ユーザがペナルティを報告され、その事実が認められた時の挙動について

### 挙動

すべての子ユーザにペナルティの罰金額が配給される


## 一つの家族に登録できる管理者数について

### 背景

管理者はメンバーに対して、クエストの発行やお小遣いの管理ができる。
考えているユースケースでは、現実の家族の親が管理者になる想定。
そのため、母親、父親共に管理者になる場合、人数は2以上登録できるようにする必要があるのではないかと思い、以下に仕様を定義する。

### 管理者数

初期のリリース時は1人にする。
しかし、ユーザの登録数が増えたら、二人以上登録できるように、拡張性を持たせて、設計をする。

### 今後のタスク

- [ ]  二人以上登録できるような設計になっているか
- [ ]


## 管理アカウントからメンバーアカウントへの切り替え方法について

### 背景

このアプリには大きく分けて「管理アカウント」と「メンバーアカウント」があり、それぞれ別の画面で構成されている。
「管理アカウント」を作成した際、自身の「メンバーアカウント」に紐づけることが可能になる。
この時、紐づけたメンバーアカウントの切り替え方法について以下に定義する。

### 切り替え方法

管理者はメンバーへの切り替えボタンを画面のどこかに配置する

### TODO

- [ ]  切り替えボタンをどの画面に配置するか考える
- [ ]  


## 配列や辞書を値オブジェクトにするかどうか
### 背景

通常、値オブジェクトといえば、単体のプリミティブ型を想像するが、配列や辞書型はどうするか悩んだため備忘録を残す

### 結論

配列や辞書も値オブジェクトにする

### 理由

値オブジェクトにしない場合、sortメソッドなどを使用するとイミュータブルではなくなってしまう。

```dart
likes.sort((a, b) => a.likedAt.compareTo(b.likedAt)); // イミュータブルじゃなくなる
```

よって、上記の場合、Likesオブジェクトを作って、内部の状況を変えないソートメソッドを定義してそれだけを提供するようにしよう

### 実装する際の注意点

通常のプリミティブ型の値オブジェクトと違って、valueはプライベートにする

```dart
class KeyQuests {
  KeyQuests(this._list);
  final List<KeyQuestable> _list; // これにより、順番を変えられたり、値を勝手に入れられたりしない
}

```






## ログイン画面
- [supabase-community/flutter-auth-ui: Supabase Auth UI library for Flutter](https://github.com/supabase-community/flutter-auth-ui)
- 
