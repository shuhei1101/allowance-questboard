[indexへ戻る](../index.md)
# 🔍 エンティティ

## 基底エンティティ
- 物理名: `AppBaseEntity`
- 配置場所: `core/entity/appBaseEntity.ts`
- 全てのエンティティの基底クラス

### 継承
- typeormの`BaseEntity`を継承

### プロパティ
- ID: 数値
  - 主キー
- バージョン: 数値
  - デフォルト値: 1
  - null: 非許容
  - 説明: 楽観的ロックのためのバージョン管理
- 作成日時: 日時
- 作成者: 数値
- 作成元画面: 数値
- 更新日時: 日時
- 更新者: 数値
- 更新元画面: 数値

### 抽象メソッド_モデルからエンティティを生成
- 引数でドメインモデルを受け取り、エンティティを生成する

### 抽象メソッド_初期データを定義
- 初期データを定義するメソッド
- メソッド[初期データ投入](#メソッド_初期データ投入)で呼び出される

### メソッド_初期データ投入
- データベースに初期データを投入するメソッド

## 基底履歴エンティティ
- 物理名: `BaseHistoryEntity`
- 配置場所: `core/entity/baseHistoryEntity.ts`
- 履歴エンティティが継承する基底クラス

### 継承
- `AppBaseEntity`を継承

### プロパティ
- 基底クラスと同様のプロパティをもつ

### メソッド_元のエンティティから生成する
- 基底クラスの属性を元にインスタンスを生成する
- [抽象メソッド_独自の属性を設定する](#抽象メソッド_独自の属性を設定する)

### 抽象メソッド_独自の属性を設定する
- 具象エンティティで実装する
- 元のエンティティの独自の属性を履歴エンティティに設定する

## 基底翻訳エンティティ
- 物理名: `BaseTranslationEntity`
- 配置場所: `core/entity/baseTranslationEntity.ts`

### 継承
- `AppBaseEntity`を継承

### プロパティ
- 言語ID: 数値
- 元のエンティティID: 数値
  - 外部参照

## 翻訳エンティティコレクション
- 物理名: `BaseTranslationCollection`
- 配置場所: `core/entity/baseTranslationCollection.ts`
- 説明: 翻訳エンティティのリストを保持するファーストクラスコレクションクラス
  - 翻訳エンティティから翻訳用マップを生成するときに利用する

### プロパティ
- -リスト: 具象クラスの型
- -翻訳元ID毎のリスト辞書: 数値, 辞書<言語ID: 数値, 具象クラスの型>
  - 物理名: `item_by_source`

### メソッド_辞書を更新する
- 辞書を更新する
- 初期化時、新たなデータを挿入した際

### メソッド_データの取得
#### 引数
- 翻訳元ID: 数値
- 言語ID: 数値

#### 戻り値
- 対応するデータ

### メソッド_翻訳元IDから辞書を取得する
#### 引数
- 翻訳元ID: 数値

#### 戻り値
- 対応する辞書
