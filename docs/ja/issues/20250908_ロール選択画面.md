# ロール選択画面

## 概要
- メールアドレス、パスワードでログイン後に遷移する画面
- 項目として、親でログインボタン、子で選択ボタンがある

## イベント_初期表示時
- loginRouter.loginを、実行
  - jwtトークン.useridから紐づく親と子、家族を取得する
  - 紐づく情報がない項目はundefinedとする
  - jwtトークンはSessionStoreから取得する

## 画面項目
### 戻るボタン
- expo標準の戻りボタン

### 家族名ラベル
- 取得.家族≠undefinedの場合、表示
- 取得.家族.nameを表示

### 家族作成ボタン
- 取得.家族==undefinedの場合、表示

#### 押下時
- 家族作成画面へ遷移する
- props.確定ボタンハンドル
  - 親idがあれば、親画面トップに遷移する。

### 親でログインボタン
- 取得.親≠undefinedの場合、表示

#### 押下時
- 親ホーム画面へ遷移(親id)
(親ホーム画面遷移後に、ユーザの正当性検証)

### 親ユーザ作成ボタン
- 取得.家族≠undefinedかつ取得.親==undefinedの場合、表示
- (子供と親両方undefinedの場合は、家族作成ボタンが表示され、
  家族作成と同時に、親を作成するフローのため、上記条件となっている)

#### 押下時
- 親ユーザ作成画面へ遷移

### 子でログインボタン
- 取得.子供≠undefinedの場合、表示

#### 押下時
- 子供ホーム画面へ遷移(子供id)
(子供ホーム画面遷移後に、ユーザの正当性検証)

### 子供ユーザ作成ボタン
- 取得.子供==undefinedの場合、表示

#### 押下時
- 取得.親==undefinedの場合
  - 家族コード入力画面を表示
- 子供ユーザ作成画面へ遷移


## 実装計画

### バックエンド (既存利用)
- [x] loginRouter
  - ファイルパス: `@backend/src/features/auth/router/loginRouter.ts`
  - 概要: 既存のloginエンドポイントを使用

### フロントエンド (Model)
- [x] roleSelectData
  - ファイルパス: `@frontend/src/features/auth/role-select-page/models/roleSelectData.ts`
  - 概要:
    - loginResponseから得られるデータモデル
    - 家族情報、親情報、子情報の保持

### フロントエンド (Store)
- [x] roleSelectPageStore
  - ファイルパス: `@frontend/src/features/auth/role-select-page/stores/roleSelectPageStore.ts`
  - 概要:
    - ページの状態管理
    - loginResponse の管理
    - ローディング状態の管理
    - roleSelectData

### フロントエンド (Service)
- [x] fetchRoleSelectData
  - ファイルパス: `@frontend/src/features/auth/role-select-page/services/fetchRoleSelectData.ts`
  - 概要:
    - loginRouter.loginを呼び出してデータ取得
    - JWTトークンを使用した認証付きリクエスト
    - レスポンスをRoleSelectDataモデルに変換

### フロントエンド (Hook - 基本機能)
- [x] useRoleSelectDataInitializer
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/useRoleSelectDataInitializer.ts`
  - 概要:
    - loginRouter.loginを呼び出してデータ初期化
    - JWTトークンからユーザー情報取得
    - ページ初期表示時の処理

### フロントエンド (Hook - ハンドラー)
- [x] useFamilyCreateHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/handlers/useFamilyCreateHandler.ts`
  - 概要:
    - 家族作成ボタン押下時の処理
    - 家族作成画面への遷移

- [x] useParentLoginHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/handlers/useParentLoginHandler.ts`
  - 概要:
    - 親でログインボタン押下時の処理
    - 親ホーム画面への遷移

- [x] useParentCreateHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/handlers/useParentCreateHandler.ts`
  - 概要:
    - 親ユーザ作成ボタン押下時の処理
    - 親ユーザ作成画面への遷移

- [x] useChildLoginHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/handlers/useChildLoginHandler.ts`
  - 概要:
    - 子でログインボタン押下時の処理
    - 子供ホーム画面への遷移

- [x] useChildCreateHandler
  - ファイルパス: `@frontend/src/features/auth/role-select-page/handlers/useChildCreateHandler.ts`
  - 概要:
    - 子供ユーザ作成ボタン押下時の処理
    - 家族コード入力画面または子供ユーザ作成画面への遷移

### フロントエンド (Hook - 統合)
- [x] useRoleSelectPageHandlers
  - ファイルパス: `@frontend/src/features/auth/role-select-page/hooks/useRoleSelectPageHandlers.ts`
  - 概要:
    - 統合フック - 全ハンドラーをまとめて提供

### フロントエンド (Components)
- [x] FamilyNameLabel
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/FamilyNameLabel.tsx`
  - 概要:
    - 家族名表示用ラベル
    - 家族情報がある場合のみ表示

- [x] FamilyCreateButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/FamilyCreateButton.tsx`
  - 概要:
    - 家族作成ボタン
    - 家族情報がない場合のみ表示

- [x] ParentLoginButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/ParentLoginButton.tsx`
  - 概要:
    - 親でログインボタン
    - 親情報がある場合のみ表示

- [x] ParentCreateButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/ParentCreateButton.tsx`
  - 概要:
    - 親ユーザ作成ボタン
    - 家族情報があり親情報がない場合のみ表示

- [x] ChildLoginButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/ChildLoginButton.tsx`
  - 概要:
    - 子でログインボタン
    - 子情報がある場合のみ表示

- [x] ChildCreateButton
  - ファイルパス: `@frontend/src/features/auth/role-select-page/components/ChildCreateButton.tsx`
  - 概要:
    - 子供ユーザ作成ボタン
    - 子情報がない場合のみ表示

### フロントエンド (Page)
- [x] RoleSelectPage
  - ファイルパス: `@frontend/src/features/auth/role-select-page/pages/RoleSelectPage.tsx`
  - 概要:
    - ロール選択画面
    - ユーザー情報に基づいてボタンを表示

### フロントエンド (Navigator)
- [x] AuthNavigator
  - ファイルパス: `@frontend/src/navigation/auth/AuthNavigator.tsx`
  - 概要:
    - ロール選択画面をナビゲーターに追加
