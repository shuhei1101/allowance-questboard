おけー💖じゃあ**npm workspaces**でやる方法、手順ガッツリまとめるね〜✨
（しゅうへいのやってる `frontend` / `backend` / `shared` 構成にドンピシャのやつでいくよ👍）

---

## 1️⃣ ディレクトリ作成

```bash
mkdir my-monorepo
cd my-monorepo

mkdir packages
mkdir packages/frontend packages/backend packages/shared
```

---

## 2️⃣ ルートの `package.json` 作成

ルートは **private: true** にして、ワークスペースを定義するのが必須だよ💡

```jsonc
// package.json（ルート）
{
  "name": "my-monorepo",
  "private": true,
  "workspaces": [
    "packages/*"
  ]
}
```

---

## 3️⃣ 各パッケージに `package.json` 作成

### 例: shared（共通コード）

```jsonc
// packages/shared/package.json
{
  "name": "@shared/utils",
  "version": "1.0.0",
  "main": "src/index.ts"
}
```

```bash
mkdir packages/shared/src
echo "export const hello = () => console.log('Hello from shared');" > packages/shared/src/index.ts
```

---

### 例: frontend（React / Expo）

```jsonc
// packages/frontend/package.json
{
  "name": "frontend",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "@shared/utils": "*"
  }
}
```

---

### 例: backend（Node.js / FastAPIラッパとか）

```jsonc
// packages/backend/package.json
{
  "name": "backend",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "@shared/utils": "*"
  }
}
```

---

## 4️⃣ インストール

ルートでやるだけ！✨

```bash
npm install
```

これで `@shared/utils` が `frontend` と `backend` から直接importできるようになる💡
npmが自動でシンボリックリンクを貼ってくれるから、`npm link` とか不要。

---

## 5️⃣ TypeScriptでのパス解決

パスエイリアスを使うなら、ルートに `tsconfig.json` を置いて設定する。

```jsonc
// tsconfig.json（ルート）
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@shared/*": ["packages/shared/src/*"]
    }
  }
}
```

---

## 6️⃣ （Expo / React Native向け）Metro設定

もしExpoで `@shared` をimportするなら `metro.config.js` にこれを追加する必要あるよ✨

```js
// packages/frontend/metro.config.js
const path = require("path");
const { getDefaultConfig } = require("@expo/metro-config");

const config = getDefaultConfig(__dirname);

config.resolver.nodeModulesPaths = [
  path.resolve(__dirname, "../../node_modules"),
  path.resolve(__dirname, "node_modules")
];

config.watchFolders = [
  path.resolve(__dirname, "../../packages/shared")
];

module.exports = config;
```

---

## 7️⃣ 実行方法

* フロント起動

```bash
cd packages/frontend
npm start
```

* バックエンド起動

```bash
cd packages/backend
npm run dev
```

（ルートにscripts作って同時起動もできる👌）

---

これで **npm workspacesモノレポ**完成だよ〜✨
もし「frontendからsharedをimportしたらMetroで怒られる」ってパターンになったら、Expo特有の**トランスパイル設定**も入れる必要あるから、そのやつも書けるよ💡

---

しゅうへい、このあとExpo用の`babel.config.js`とかトランスパイル設定まで出しとく？
そこまでやれば確実に動くやつになるよ✨
