ãŠã‘ãƒ¼ğŸ’–ã˜ã‚ƒã‚**npm workspaces**ã§ã‚„ã‚‹æ–¹æ³•ã€æ‰‹é †ã‚¬ãƒƒãƒ„ãƒªã¾ã¨ã‚ã‚‹ã­ã€œâœ¨
ï¼ˆã—ã‚…ã†ã¸ã„ã®ã‚„ã£ã¦ã‚‹ `frontend` / `backend` / `shared` æ§‹æˆã«ãƒ‰ãƒ³ãƒ”ã‚·ãƒ£ã®ã‚„ã¤ã§ã„ãã‚ˆğŸ‘ï¼‰

---

## 1ï¸âƒ£ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ

```bash
mkdir my-monorepo
cd my-monorepo

mkdir packages
mkdir packages/frontend packages/backend packages/shared
```

---

## 2ï¸âƒ£ ãƒ«ãƒ¼ãƒˆã® `package.json` ä½œæˆ

ãƒ«ãƒ¼ãƒˆã¯ **private: true** ã«ã—ã¦ã€ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’å®šç¾©ã™ã‚‹ã®ãŒå¿…é ˆã ã‚ˆğŸ’¡

```jsonc
// package.jsonï¼ˆãƒ«ãƒ¼ãƒˆï¼‰
{
  "name": "my-monorepo",
  "private": true,
  "workspaces": [
    "packages/*"
  ]
}
```

---

## 3ï¸âƒ£ å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã« `package.json` ä½œæˆ

### ä¾‹: sharedï¼ˆå…±é€šã‚³ãƒ¼ãƒ‰ï¼‰

```jsonc
// packages/shared/package.json
{
  "name": "@shared/utils",
  "version": "1.0.0",
  "main": "src/index.ts"
}
```

```bash
mkdir packages/shared/src
echo "export const hello = () => console.log('Hello from shared');" > packages/shared/src/index.ts
```

---

### ä¾‹: frontendï¼ˆReact / Expoï¼‰

```jsonc
// packages/frontend/package.json
{
  "name": "frontend",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "@shared/utils": "*"
  }
}
```

---

### ä¾‹: backendï¼ˆNode.js / FastAPIãƒ©ãƒƒãƒ‘ã¨ã‹ï¼‰

```jsonc
// packages/backend/package.json
{
  "name": "backend",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "@shared/utils": "*"
  }
}
```

---

## 4ï¸âƒ£ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ãƒ«ãƒ¼ãƒˆã§ã‚„ã‚‹ã ã‘ï¼âœ¨

```bash
npm install
```

ã“ã‚Œã§ `@shared/utils` ãŒ `frontend` ã¨ `backend` ã‹ã‚‰ç›´æ¥importã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ğŸ’¡
npmãŒè‡ªå‹•ã§ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’è²¼ã£ã¦ãã‚Œã‚‹ã‹ã‚‰ã€`npm link` ã¨ã‹ä¸è¦ã€‚

---

## 5ï¸âƒ£ TypeScriptã§ã®ãƒ‘ã‚¹è§£æ±º

ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ã†ãªã‚‰ã€ãƒ«ãƒ¼ãƒˆã« `tsconfig.json` ã‚’ç½®ã„ã¦è¨­å®šã™ã‚‹ã€‚

```jsonc
// tsconfig.jsonï¼ˆãƒ«ãƒ¼ãƒˆï¼‰
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@shared/*": ["packages/shared/src/*"]
    }
  }
}
```

---

## 6ï¸âƒ£ ï¼ˆExpo / React Nativeå‘ã‘ï¼‰Metroè¨­å®š

ã‚‚ã—Expoã§ `@shared` ã‚’importã™ã‚‹ãªã‚‰ `metro.config.js` ã«ã“ã‚Œã‚’è¿½åŠ ã™ã‚‹å¿…è¦ã‚ã‚‹ã‚ˆâœ¨

```js
// packages/frontend/metro.config.js
const path = require("path");
const { getDefaultConfig } = require("@expo/metro-config");

const config = getDefaultConfig(__dirname);

config.resolver.nodeModulesPaths = [
  path.resolve(__dirname, "../../node_modules"),
  path.resolve(__dirname, "node_modules")
];

config.watchFolders = [
  path.resolve(__dirname, "../../packages/shared")
];

module.exports = config;
```

---

## 7ï¸âƒ£ å®Ÿè¡Œæ–¹æ³•

* ãƒ•ãƒ­ãƒ³ãƒˆèµ·å‹•

```bash
cd packages/frontend
npm start
```

* ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•

```bash
cd packages/backend
npm run dev
```

ï¼ˆãƒ«ãƒ¼ãƒˆã«scriptsä½œã£ã¦åŒæ™‚èµ·å‹•ã‚‚ã§ãã‚‹ğŸ‘Œï¼‰

---

ã“ã‚Œã§ **npm workspacesãƒ¢ãƒãƒ¬ãƒ**å®Œæˆã ã‚ˆã€œâœ¨
ã‚‚ã—ã€Œfrontendã‹ã‚‰sharedã‚’importã—ãŸã‚‰Metroã§æ€’ã‚‰ã‚Œã‚‹ã€ã£ã¦ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãªã£ãŸã‚‰ã€Expoç‰¹æœ‰ã®**ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«è¨­å®š**ã‚‚å…¥ã‚Œã‚‹å¿…è¦ã‚ã‚‹ã‹ã‚‰ã€ãã®ã‚„ã¤ã‚‚æ›¸ã‘ã‚‹ã‚ˆğŸ’¡

---

ã—ã‚…ã†ã¸ã„ã€ã“ã®ã‚ã¨Expoç”¨ã®`babel.config.js`ã¨ã‹ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«è¨­å®šã¾ã§å‡ºã—ã¨ãï¼Ÿ
ãã“ã¾ã§ã‚„ã‚Œã°ç¢ºå®Ÿã«å‹•ãã‚„ã¤ã«ãªã‚‹ã‚ˆâœ¨
