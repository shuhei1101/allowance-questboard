# 入力フィールドコンポーネントの値オブジェクト対応

## 概要
現在のstring型を使用している入力フィールドコンポーネントを、値オブジェクトを使用するように変更する。
プロジェクト全体の一貫性向上と型安全性の強化を目的とする。

## 理由
- フォームやハンドラーレベルでは既に値オブジェクトを使用している
- コンポーネントレベルでstring型を使うと、ハンドラーで`new ValueObject(string)`の変換処理が発生
- エンドツーエンドでの型安全性を確保するため
- 値オブジェクトのバリデーション機能をコンポーネントレベルでも活用するため

## 対象コンポーネント

### 1. 家族登録系コンポーネント
### 1. 家族ID入力（FamilyIdInput）
- [x] FamilyIdInput → FamilyDisplayId対応
  - ファイルパス: `@frontend/src/features/family/family-register-page/components/FamilyIdInput.tsx`
  - 概要: 
    - props型をstring → FamilyDisplayIdに変更
    - 内部でstring⇔FamilyDisplayIdの変換処理を追加
    - バリデーション処理をFamilyDisplayIdの仕様に合わせる
    - 不要なtry-catchを削除（値オブジェクトは例外をthrowしないため）
  - 参考: FamilyDisplayId値オブジェクト
  - デモページ: `demo/development/component/components/FamilyIdInputPage.tsx`も同時修正

- [x] BaseFamilyName
  - FamilyNameとFamilyOnlineNameの基底クラス
  - ファイルパス: `@backend/src/features/family/value-object/baseFamilyName.ts`
  - stringのvalueをもつってだけ。
  - バリデーションはしない
  - この基底クラスはFamilyNameInputで使用する

- [x] FamilyNameInput → FamilyName対応
  - ファイルパス: `@frontend/src/features/family/family-register-page/components/FamilyNameInput.tsx`
  - 概要:
    - `value: string` → `value: FamilyName`
    - `onChange: (value: string) => void` → `onChange: (value: FamilyName) => void`
    - TextInputからの文字列入力を内部でFamilyNameに変換
  - 参考: `@backend/src/features/family/value-object/familyName.ts`

- [x] OnlineFamilyNameInputEntry内のFamilyNameInput → FamilyOnlineName対応
  - ファイルパス: `@frontend/src/features/family/family-register-page/components/OnlineFamilyNameInputEntry.tsx`
  - 概要:
    - 内部で使用しているFamilyNameInputをFamilyOnlineNameに対応
    - FamilyName⇔FamilyOnlineName変換処理を追加
    - FamilyNameInputとは別のコンポーネントとして分離検討
  - 参考: `@backend/src/features/family/value-object/familyOnlineName.ts`

### 2. 認証系コンポーネント
- [x] EmailInput → Email対応
  - ファイルパス: `@frontend/src/features/shared/components/EmailInput.tsx`
  - 概要:
    - `value: string` → `value: Email`
    - `onChange: (value: string) => void` → `onChange: (value: Email) => void`
    - メールアドレスバリデーションを値オブジェクトで実施
  - 参考: `@backend/src/features/auth/value-object/email.ts`

- [x] PasswordInput → Password対応
  - ファイルパス: `@frontend/src/features/shared/components/PasswordInput.tsx`
  - 概要:
    - `value: string` → `value: Password`
    - `onChange: (value: string) => void` → `onChange: (value: Password) => void`
    - パスワード強度バリデーションを値オブジェクトで実施
  - 参考: `@backend/src/features/auth/value-object/password.ts`

### 3. 親情報系コンポーネント
- [x] ParentNameInputField → ParentName対応
  - ファイルパス: `@frontend/src/features/parent/parent-edit-page/components/ParentNameInputField.tsx`
  - 概要:
    - `value: string` → `value: ParentName`
    - `onChange: (text: string) => void` → `onChange: (value: ParentName) => void`
  - 参考: `@backend/src/features/parent/value-object/parentName.ts`

- [x] BirthdayInput → Birthday対応
  - ファイルパス: `@frontend/src/features/shared/components/BirthdayInput.tsx`
  - 概要:
    - `value: string` → `value: Birthday`
    - `onChange: (date: string) => void` → `onChange: (value: Birthday) => void`
    - 日付形式の処理をBirthday.fromString()で統一
  - 参考: `@backend/src/features/shared/value-object/birthday.ts`

## 影響範囲

### 1. デモページ更新
- [x] FamilyIdInputPage
  - ファイルパス: `@frontend/demo/development/component/components/FamilyIdInputPage.tsx`
  - 概要: FamilyDisplayId使用に合わせてデモロジック更新

- [x] FamilyNameInputPage
  - ファイルパス: `@frontend/demo/development/component/components/FamilyNameInputPage.tsx`
  - 概要: FamilyName使用に合わせてデモロジック更新

- [x] EmailInputPage
  - ファイルパス: `@frontend/demo/development/component/components/EmailInputPage.tsx`
  - 概要: Email使用に合わせてデモロジック更新

- [x] PasswordInputPage
  - ファイルパス: `@frontend/demo/development/component/components/PasswordInputPage.tsx`
  - 概要: Password使用に合わせてデモロジック更新

- [x] BirthdayInputPage
  - ファイルパス: `@frontend/demo/development/component/components/BirthdayInputPage.tsx`
  - 概要: Birthday使用に合わせてデモロジック更新

### 2. ハンドラー更新
- [x] useFamilyIdInputHandler
  - ファイルパス: `@frontend/src/features/family/family-register-page/handlers/useFamilyIdInputHandler.ts`
  - 概要:
    - `handleFamilyIdChange: (text: string) => void` → `handleFamilyIdChange: (value: FamilyDisplayId) => void`
    - `new FamilyDisplayId(text)`の変換処理を削除

- [x] usePasswordHandler (認証画面)
  - ファイルパス: `@frontend/src/features/auth/login-page/hooks/handlers/usePasswordHandler.ts`
  - 概要:
    - `(value: string) => void` → `(value: Password) => void`
    - `new Password(value)`の変換処理を削除

- [x] usePasswordHandler (親編集画面)
  - ファイルパス: `@frontend/src/features/parent/parent-edit-page/hooks/handlers/usePasswordHandler.ts`
  - 概要:
    - `(password: string) => void` → `(value: Password) => void`
    - `new Password(password)`の変換処理を削除

### 3. Entry系コンポーネント更新
- [x] FamilyNameInputEntry
  - ファイルパス: `@frontend/src/features/family/family-register-page/components/FamilyNameInputEntry.tsx`
  - 概要: FamilyNameInputの値オブジェクト対応に合わせて更新

- [x] ParentNameInputFieldEntry
  - ファイルパス: `@frontend/src/features/parent/parent-edit-page/components/ParentNameInputFieldEntry.tsx`
  - 概要: ParentNameInputFieldの値オブジェクト対応に合わせて更新

- [x] BirthdayInputEntry
  - ファイルパス: `@frontend/src/features/shared/components/BirthdayInputEntry.tsx`
  - 概要: BirthdayInputの値オブジェクト対応に合わせて更新

### 4. Showcase系更新
- [ ] ComponentShowcase
  - ファイルパス: `@frontend/demo/development/component-showcase-page/ComponentShowcase.tsx`
  - 概要: 各入力コンポーネントの値オブジェクト対応に合わせて更新

## 実装方針

### 基本パターン
```typescript
// Before
export interface ComponentProps {
  value: string;
  onChange: (value: string) => void;
}

// After
export interface ComponentProps {
  value: ValueObject;
  onChange: (value: ValueObject) => void;
}

// コンポーネント内部でのハンドリング
const handleTextChange = (text: string) => {
  try {
    const valueObject = new ValueObject(text);
    onChange(valueObject);
  } catch (error) {
    // バリデーションエラー時は既存のエラー表示機能を使用
    // または値オブジェクトのisValidフラグを確認
  }
};
```

### エラーハンドリング
- 値オブジェクトのバリデーション失敗時は、`isValid`フラグと`errorMessage`を活用
- 既存のerrorプロパティとの整合性を保つ

### Birthday特別対応
- `Birthday.fromString()`メソッドを使用してstring→Birthdayの変換
- `birthday.toISOString()`でBirthday→stringの表示形式変換

## 完了条件
- [ ] 全対象コンポーネントの値オブジェクト対応完了
- [ ] デモページでの動作確認完了
- [ ] 既存ハンドラーからの変換処理削除完了
- [ ] エラーなしでビルド完了
- [ ] 型安全性の向上確認

## 注意事項
- TextInputは引き続きstring型で動作するため、内部での変換処理は必須
- 値オブジェクトのバリデーションエラーと既存のエラー表示機能の統合
- デモページでの値オブジェクト操作時の使いやすさ確保
