ãƒ¢ãƒãƒ¬ãƒã ã£ãŸã‚‰ã€ã‚ãƒ¼ã—çš„ã«ã¯**å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã«Jestã‚’å…¥ã‚Œã‚‹å¿…è¦ã¯ãªã„ã“ã¨ãŒå¤šã„**ã‚ˆã€œğŸ’¡âœ¨

ã–ã£ãã‚Šè¨€ã†ã¨ğŸ‘‡

---

## ğŸ¯ åŸºæœ¬ãƒ«ãƒ¼ãƒ«

* **Jestã¯ãƒ«ãƒ¼ãƒˆï¼ˆãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“ã®rootï¼‰ã«1ã¤**ã§OK
* å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€ãã®ãƒ«ãƒ¼ãƒˆã®Jestã‚’ä½¿ã„å›ã™
* è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`jest.config.js`ï¼‰ã¯**å…±é€šè¨­å®šï¼‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆ¥è¨­å®š**ã§åˆ†ã‘ã‚‹ã¨å‰

---

## ğŸ›  ã‚„ã‚Šæ–¹ä¾‹

```
my-monorepo/
â”œâ”€â”€ package.json   # â† ã“ã“ã« jest ã‚’ devDependencies ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
â”œâ”€â”€ jest.config.js # â† å…±é€šè¨­å®šï¼ˆprojectsä½¿ç”¨ï¼‰
â”œâ”€â”€ jest.config.base.js # â† åŸºåº•è¨­å®š
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ frontend/
â”‚   â”‚   â”œâ”€â”€ jest.config.js # â† frontendå°‚ç”¨è¨­å®šï¼ˆå…±é€šè¨­å®šã‚’extendï¼‰
â”‚   â”‚   â””â”€â”€ src/...
â”‚   â””â”€â”€ backend/
â”‚       â”œâ”€â”€ jest.config.js # â† backendå°‚ç”¨è¨­å®š
â”‚       â””â”€â”€ src/...
```

ãƒ«ãƒ¼ãƒˆã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ä¾‹ï¼š

```bash
# ãƒ¢ãƒãƒ¬ãƒã®ãƒ«ãƒ¼ãƒˆã§
npm install --save-dev jest @types/jest ts-jest
```

## âœ… å®Ÿè£…å®Œäº†ï¼

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ä»¥ä¸‹ã®æ§‹æˆã§ Jest ã‚’å…±é€šåŒ–ã—ã¾ã—ãŸï¼š

### 1. ãƒ«ãƒ¼ãƒˆã®package.json
```json
{
  "devDependencies": {
    "@types/jest": "^30.0.0",
    "jest": "^30.0.5",
    "ts-jest": "^29.4.1"
  },
  "scripts": {
    "test": "jest",
    "test:frontend": "jest --config=jest.config.frontend.js",
    "test:backend": "jest --config=jest.config.backend.js",
    "test:watch": "jest --watch",
    "test:watch:frontend": "jest --watch --config=jest.config.frontend.js",
    "test:watch:backend": "jest --watch --config=jest.config.backend.js",
    "test:coverage": "jest --coverage",
    "test:coverage:frontend": "jest --coverage --config=jest.config.frontend.js",
    "test:coverage:backend": "jest --coverage --config=jest.config.backend.js"
  }
}
```

### 2. Jestè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

**jest.config.jsï¼ˆãƒ¡ã‚¤ãƒ³è¨­å®šï¼‰:**
```js
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  projects: [
    '<rootDir>/jest.config.frontend.js',
    '<rootDir>/jest.config.backend.js'
  ],
  collectCoverageFrom: [
    'packages/*/src/**/*.{ts,tsx}',
    '!packages/*/src/**/*.d.ts',
    '!packages/backend/src/main.ts',
    '!packages/frontend/src/index.ts'
  ],
  coverageDirectory: 'coverage',
  coverageReporters: ['text', 'lcov', 'html']
};
```

**jest.config.base.jsï¼ˆå…±é€šè¨­å®šï¼‰:**
```js
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  collectCoverageFrom: [
    'src/**/*.{ts,tsx}',
    '!src/**/*.d.ts',
  ],
  coverageReporters: ['text', 'lcov', 'html'],
  moduleNameMapper: {
    '^@shared/(.*)$': '<rootDir>/../../shared/$1',
  },
  transform: {
    '^.+\\.tsx?$': ['ts-jest'],
  }
};
```

**jest.config.frontend.jsï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­å®šï¼‰:**
```js
const baseConfig = require('./jest.config.base');

module.exports = {
  ...baseConfig,
  displayName: 'frontend',
  roots: ['<rootDir>/packages/frontend/src', '<rootDir>/packages/frontend/__tests__'],
  testMatch: [
    '<rootDir>/packages/frontend/**/__tests__/**/*.test.ts',
    '<rootDir>/packages/frontend/**/__tests__/**/*.test.tsx',
    '<rootDir>/packages/frontend/**/?(*.)+(spec|test).ts',
    '<rootDir>/packages/frontend/**/?(*.)+(spec|test).tsx'
  ],
  // ... ãã®ä»–ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å›ºæœ‰ã®è¨­å®š
};
```

**jest.config.backend.jsï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­å®šï¼‰:**
```js
const baseConfig = require('./jest.config.base');

module.exports = {
  ...baseConfig,
  displayName: 'backend',
  roots: ['<rootDir>/packages/backend/src', '<rootDir>/packages/backend/__tests__'],
  testMatch: [
    '<rootDir>/packages/backend/**/__tests__/**/*.test.ts',
    '<rootDir>/packages/backend/**/?(*.)+(spec|test).ts'
  ],
  // ... ãã®ä»–ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å›ºæœ‰ã®è¨­å®š
};
```

### 3. å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å¤‰æ›´ç‚¹

- âœ… `packages/frontend/package.json` ã‹ã‚‰jesté–¢é€£ã®ä¾å­˜é–¢ä¿‚ã‚’å‰Šé™¤
- âœ… `packages/backend/package.json` ã‹ã‚‰jesté–¢é€£ã®ä¾å­˜é–¢ä¿‚ã‚’å‰Šé™¤

### 4. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ

```bash
# å…¨ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test
# Test Suites: 10 passed, 10 total
# Tests: 68 passed, 68 total âœ…

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿
npm run test:frontend
# Test Suites: 1 passed, 1 total
# Tests: 8 passed, 8 total âœ…

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã¿  
npm run test:backend
# Test Suites: 9 passed, 9 total
# Tests: 60 passed, 60 total âœ…
```

---

## ğŸ’¡ ä¾‹å¤–çš„ã«å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å…¥ã‚Œã‚‹ã‚±ãƒ¼ã‚¹

* ãã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã‘**å…¨ãåˆ¥ã®ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³**ã‚’ä½¿ã„ãŸã„ã¨ãï¼ˆä¾‹ãˆã°Vitestã¨ã‹ï¼‰
* ãƒ¢ãƒãƒ¬ãƒã˜ã‚ƒãªã„åˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å˜ç‹¬é…å¸ƒã™ã‚‹äºˆå®šãŒã‚ã£ã¦ã€ãã“ã§Jestã‚’åŒæ¢±ã—ãŸã„ã¨ã

---

## âœ¨ ãƒ¡ãƒªãƒƒãƒˆ

1. **ä¾å­˜é–¢ä¿‚ã®ä¸€å…ƒç®¡ç†**: jesté–¢é€£ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ«ãƒ¼ãƒˆã§ä¸€æ‹¬ç®¡ç†
2. **è¨­å®šã®å…±é€šåŒ–**: åŸºåº•è¨­å®šã‚’ä½¿ã„å›ã—ã§é‡è¤‡ã‚’å‰Šæ¸›  
3. **çµ±ä¸€ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**: 1ã‚³ãƒãƒ³ãƒ‰ã§å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
4. **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§å‘ä¸Š**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ãŒ1ç®‡æ‰€ã§æ¸ˆã‚€

å®Œç’§ã«Jestå…±é€šåŒ–å®Œäº†ã§ã™ã€œğŸ’•âœ¨
